(this["webpackJsonpschoolspace-web"]=this["webpackJsonpschoolspace-web"]||[]).push([[0],{102:function(e,t,a){},105:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l),o=(a(66),a(67),a(3)),s=(a(68),a(11)),i=a.n(s),u=a(16),m=a(4),d=a(5),p=new(a(58).a),g=new(function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"get",value:function(e){return p.get(e)}},{key:"set",value:function(e,t,a){return p.set(e,t,a)}},{key:"remove",value:function(e){console.log("Removing cookie..."),p.remove(e,{path:"/",domain:"localhost"})}}]),e}()),h=new(function(){function e(){Object(m.a)(this,e);var t=g.get("access_token");this.authenticated=!!t}return Object(d.a)(e,[{key:"login",value:function(e,t,a){var n=this,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};fetch("https://mighty-everglades-28994.herokuapp.com/api/v1/login",r).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var r,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,t.ok){e.next=6;break}return l=r&&r.message||t.status,e.abrupt("return",Promise.reject(l));case 6:n.authenticated=!0,c={path:"/",sameSite:"strict"},g.set("access_token",r.access_token,c),a();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("ERROR : ",e),a(e)}))}},{key:"logout",value:function(e){g.remove("access_token"),this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),b=a(8);function f(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),g=p[0],f=p[1],v=Object(b.g)();return r.a.createElement("div",{className:"flex-center container fullscreen"},r.a.createElement("div",{className:"w-md-40 px-xs-5 px-3"},r.a.createElement("label",{className:"logotxt w-100 mb-3"},"School Space"),r.a.createElement("form",{onSubmit:function(e){h.login(l,u,(function(e){null!=e?f("Invalid login attempt. Please check email/password."):(f(""),v.push("/"))})),e.preventDefault()}},r.a.createElement("label",{className:"errormessage"},g),r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:"email",className:"form-control mb-3",value:l,onChange:function(e){return c(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"password",className:"form-control mb-3",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-block btn-primary mb-3",disabled:!(l.length>0&&u.length>0)}))))}var v=a(21),E=a(10),N=a(9),j=a(19),O=new(function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"get",value:function(e){if(!h.isAuthenticated())return null;var t={method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+g.get("access_token")}};fetch("https://mighty-everglades-28994.herokuapp.com/api/v1/user",t).then(function(){var t=Object(u.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:if(n=t.sent,a.ok){t.next=6;break}return r=n&&n.message||a.status,t.abrupt("return",Promise.reject(r));case 6:console.log("User loaded."),e(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("ERROR : ",e),e.includes("Unauthenticated")&&h.logout()}))}},{key:"set",value:function(e){}}]),e}()),S=a(32);function k(e){var t=Object(b.g)();return r.a.createElement("a",{className:"dropdown-item",onClick:function(e){h.logout((function(){t.push("/login")}))}},"Logout")}var y=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={user:!1},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.get((function(t){console.log(t),e.setState({user:t}),console.log(e.state)}))}},{key:"render",value:function(){var e,t;return console.log("rendering"),this.state.user&&this.state.user.isAdmin&&(e=r.a.createElement("a",{className:"dropdown-item",href:"/admin"},"Admin Page")),t=this.state.user?r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{id:"navbarDropdown",className:"nav-link dropdown-toggle",href:"/profile",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.user.firstname+" "+this.state.user.lastname,r.a.createElement("span",{className:"caret"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},e,r.a.createElement(k,null)))):r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/register"},"Register"))),r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light fixed-top bg-white shadow-sm"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"schoolspace"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"{{ __('Toggle navigation') }}"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},t)))}}]),a}(n.Component),w=(a(99),function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bg-light border-right mt-4",id:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar-heading"}),r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("dashboard")}},"Dashboard"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("users")}},"Users"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("students")}},"Students"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("teachers")}},"Teachers"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("staff")}},"Staff"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("standards")}},"Standards"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("sections")}},"Sections"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("examinations")}},"Examinations"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("reports")}},"Reports")))}}]),a}(n.Component)),x=a(36),C=new(function(){function e(){Object(m.a)(this,e)}return Object(d.a)(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],l=arguments.length>5?arguments[5]:void 0;if(r){if(!h.isAuthenticated())return console.log("Not authenticated!"),"Not Authorized";t={method:a,headers:{Accept:n,Authorization:"Bearer "+g.get("access_token")}}}else t={method:a,headers:{Accept:n}};fetch("https://mighty-everglades-28994.herokuapp.com/api/v1"+e,t).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return n=a&&a.message||t.status,e.abrupt("return",Promise.reject(n));case 6:console.log("Sending API Request.."),l(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("ERROR : ",e),"string"===typeof e&&e.includes("Unauthenticated")&&h.logout()}))}))}]),e}()),P=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).loading=!0,n.state={stats:r.a.createElement(j.ClipLoader,{size:10,color:"#123abc",loading:!0})},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.fetch(this.props.relendpoint,"GET","text/plain",!0,null,(function(t){e.loading=!1,e.setState({stats:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.dashcardclass},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1"},this.props.title),r.a.createElement("div",{className:"h5 mb-0 font-weight-bold darkslategrey f-800"},this.state.stats)),r.a.createElement("div",{className:"col-3"},r.a.createElement(x.a,{icon:this.props.icon,size:"2x"})))))}}]),a}(n.Component),_=(a(102),a(18)),T=a(39),R=a(60),A=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={loading:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:100,color:"#123abc",loading:this.state.loading})),r.a.createElement(T.a,{plugins:[R.a],initialView:"dayGridMonth"}))}}]),a}(n.Component),z=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={sidenavtoggleicon:_.a},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t="card shadow-sm h-100 py-2";return r.a.createElement("div",null,r.a.createElement("button",{id:"btnSideNavToggle",className:"btn btn-primary px-1 rounded-0 mt-3",onClick:function(){e.props.toggleSidenav((function(t){t?e.setState({sidenavtoggleicon:_.b}):e.setState({sidenavtoggleicon:_.a})}))}},r.a.createElement(x.a,{icon:this.state.sidenavtoggleicon})),r.a.createElement("div",{className:"container-fluid maxw-90"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm",onClick:function(){return e.props.pageSelect("users")}},r.a.createElement(P,{title:"Total Users",relendpoint:"/users/count",icon:_.h,dashcardclass:t+" border-left-grey"})),r.a.createElement("div",{className:"col-sm",onClick:function(){return e.props.pageSelect("students")}},r.a.createElement(P,{title:"Students",relendpoint:"/students/count",icon:_.g,dashcardclass:t+" border-left-blue"})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(P,{title:"Teachers",relendpoint:"/teachers/count",icon:_.c,dashcardclass:t+" border-left-red"})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(P,{title:"Others",relendpoint:"-",icon:_.f,dashcardclass:t+" border-left-orange"}))),r.a.createElement("div",{className:"row my-5"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement(A,null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(P,{title:"Standards",relendpoint:"/standards/count",icon:_.e,dashcardclass:t}))),r.a.createElement("div",{className:"row py-3"},r.a.createElement("div",{className:"col"},r.a.createElement(P,{title:"Sections",relendpoint:"/sections/count",icon:_.d,dashcardclass:t})))))))}}]),a}(n.Component),I=(a(105),a(29)),M=a(30),H=a(55),G=a.n(H);var L=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(),i=Object(o.a)(s,2),u=i[0],m=i[1];return r.a.createElement("div",{className:"from-group-row",id:"hidden_student_row"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"standard_id",className:"col-md-4 col-form-label text-md-center"},"Standard ID"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("select",{id:"standard_id",type:"text",name:"standard_id",onChange:function(e){return t=e.target.value,void C.fetch("/sections?standard_id=".concat(t),"GET","application/json",!0,null,(function(e){c(e),console.log(e)}));var t},onInput:e.changeHandle,required:!0},r.a.createElement("option",{value:""}," Select Standard "),e.standards.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name," ")}))))),r.a.createElement("div",{className:"form-group row",id:"student_section_id"},r.a.createElement("label",{htmlFor:"student_section",className:"col-md-4 col-form-label text-md-center"},"Section"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("select",{id:"student_section",type:"text",name:"student_section",onChange:function(e){return t=e.target.value,void C.fetch("/students/nextroll?section=".concat(t),"GET","application/json",!0,null,(function(e){m(e),console.log(e)}));var t},onInput:e.changeHandle,required:!0},r.a.createElement("option",{value:""}," Select Section "),l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name," ")}))))),r.a.createElement("div",{className:"form-group row",id:"roll_id"},r.a.createElement("label",{htmlFor:"roll",className:"col-md-4 col-form-label text-md-center"},"Roll No."),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"roll",type:"number",name:"roll",placeholder:u,onChange:e.changeHandle,required:!0}))))},D=function(){var e,t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)([]),i=Object(o.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)({}),p=Object(o.a)(d,2),h=p[0],b=p[1],f={},v=function(e){e.persist(),b((function(t){return Object(M.a)(Object(M.a)({},t),{},Object(I.a)({},e.target.name,e.target.value.trim()))}))};return 2==h.user_role&&(e=r.a.createElement(L,{changeHandle:v,standards:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#addUserModal",onClick:function(){C.fetch("/roles","GET","application/json",!0,null,(function(e){c(e),console.log(e)}))}},"Add User"),r.a.createElement("div",{className:"modal fade",id:"addUserModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Add User"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{method:"POST",onSubmit:function(e){e.preventDefault(),e.persist(),console.log(JSON.stringify(h)),G.a.post("http://localhost:8000/api/v1/users/store",h,{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+g.get("access_token")}}).then((function(t){console.log(t),console.log(t.data),alert(e.target.firstname.value+" "+e.target.lastname.value+" added successfully."),function(e){e.persist(),b(Object(M.a)(Object(M.a)({},f),{},Object(I.a)({},e.target.name,e.target.value)))}(e),e.target.reset()})).catch((function(e){console.log(e),alert("Email or Roll is taken")}))}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"firstname",className:"col-md-4 col-form-label text-md-center"},"First Name"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"firstname",type:"text",name:"firstname",required:!0,onChange:v}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"lastname",className:"col-md-4 col-form-label text-md-center"},"Last Name"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"lastname",type:"text",name:"lastname",onChange:v,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"email",className:"col-md-4 col-form-label text-md-center"},"E-Mail Address"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"email",type:"email",name:"email",onChange:v,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"phone",className:"col-md-4 col-form-label text-md-center"},"Phone"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"phone",type:"text",name:"phone",onChange:v,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user_role",className:"col-md-4 col-form-label text-md-center"},"User Role"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("select",{id:"user_role",type:"text",name:"user_role",onChange:function(e){2==e.target.value&&C.fetch("/standards","GET","application/json",!0,null,(function(e){m(e),console.log(e)}))},onInput:v,required:!0},r.a.createElement("option",{value:""}," ","Select Role"," "),l.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name," ")}))))),e,r.a.createElement("div",{className:"modal-footer justify-content-center"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))))},U=a(22),F=a(23),q=a(43);function B(e){var t=e.columns,a=e.data,n=e.fetchData,l=e.loading,c=e.pageCount,o=Object(q.useTable)({columns:t,data:a,initialState:{pageIndex:0},manualPagination:!0,pageCount:c},q.usePagination),s=o.getTableProps,i=o.getTableBodyProps,u=o.headerGroups,m=o.prepareRow,d=o.page,p=o.canPreviousPage,g=o.canNextPage,h=o.pageOptions,b=o.pageCount,f=o.gotoPage,v=o.nextPage,E=o.previousPage,N=o.setPageSize,j=o.state,O=j.pageIndex,S=j.pageSize;return r.a.useEffect((function(){n({pageIndex:O,pageSize:S})}),[n,O,S]),r.a.createElement(r.a.Fragment,null,r.a.createElement("table",s(),r.a.createElement("thead",null,u.map((function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return r.a.createElement("th",e.getHeaderProps(),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))})))}))),r.a.createElement("tbody",i(),d.map((function(e,t){return m(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})),r.a.createElement("tr",null,l?r.a.createElement("td",{colSpan:"10000"},"Loading..."):r.a.createElement("td",{colSpan:"10000"},"Showing ",d.length," of ~",c*S," ","results")))),r.a.createElement("div",{className:"pagination"},r.a.createElement("button",{onClick:function(){return f(0)},disabled:!p},"<<")," ",r.a.createElement("button",{onClick:function(){return E()},disabled:!p},"<")," ",r.a.createElement("button",{onClick:function(){return v()},disabled:!g},">")," ",r.a.createElement("button",{onClick:function(){return f(b-1)},disabled:!g},">>")," ",r.a.createElement("span",null,"Page"," ",r.a.createElement("strong",null,O+1," of ",h.length)," "),r.a.createElement("span",null,"| Go to page:"," ",r.a.createElement("input",{type:"number",defaultValue:O+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;f(t)},style:{width:"100px"}}))," ",r.a.createElement("select",{value:S,onChange:function(e){N(Number(e.target.value))}},[10,20,30,40,50].map((function(e){return r.a.createElement("option",{key:e,value:e},"Show ",e)})))))}function J(){var e=Object(U.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n\n  .pagination {\n    padding: 0.5rem;\n  }\n"]);return J=function(){return e},e}var V=F.a.div(J());function W(){var e=r.a.useMemo((function(){return[{Header:"First Name",accessor:"firstname"},{Header:"Last Name",accessor:"lastname"},{Header:"Email",accessor:"email"},{Header:"Phone",accessor:"phone"},{Header:"Role",accessor:"role"}]}),[]),t=r.a.useState([]),a=Object(o.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),s=Object(o.a)(c,2),m=s[0],d=s[1],p=r.a.useState(0),h=Object(o.a)(p,2),b=h[0],f=h[1],v=r.a.useRef(0),E=r.a.useCallback((function(e){var t=e.pageSize,a=e.pageIndex,n=++v.current;d(!0),n===v.current&&(console.log("fetching users.."),fetch("https://mighty-everglades-28994.herokuapp.com/api/v1/users?"+new URLSearchParams({pageIndex:a,pageSize:t}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+g.get("access_token")}}).then(function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(n=e.sent,a.ok){e.next=6;break}return r=n&&n.message||a.status,e.abrupt("return",Promise.reject(r));case 6:l(n.data),f(Math.ceil(parseInt(n.recordsTotal)/t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),d(!1))}),[]);return r.a.createElement(V,null,r.a.createElement(B,{columns:e,data:n,fetchData:E,loading:m,pageCount:b}))}var $=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(D,null),r.a.createElement(W,null))}}]),a}(n.Component);function K(){var e=Object(U.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n\n  .pagination {\n    padding: 0.5rem;\n  }\n"]);return K=function(){return e},e}var Q=F.a.div(K());function X(){var e=r.a.useMemo((function(){return[{Header:"First Name",accessor:"firstname"},{Header:"Last Name",accessor:"lastname"},{Header:"Standard",accessor:"standard"},{Header:"Section",accessor:"section"},{Header:"Roll",accessor:"roll"}]}),[]),t=r.a.useState([]),a=Object(o.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),s=Object(o.a)(c,2),m=s[0],d=s[1],p=r.a.useState(0),h=Object(o.a)(p,2),b=h[0],f=h[1],v=r.a.useRef(0),E=r.a.useCallback((function(e){var t=e.pageSize,a=e.pageIndex,n=++v.current;d(!0),setTimeout((function(){n===v.current&&(console.log("fetching users.."),fetch("https://mighty-everglades-28994.herokuapp.com/api/v1/students?"+new URLSearchParams({pageIndex:a,pageSize:t}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+g.get("access_token")}}).then(function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(n=e.sent,a.ok){e.next=6;break}return r=n&&n.message||a.status,e.abrupt("return",Promise.reject(r));case 6:l(n.data),f(Math.ceil(parseInt(n.recordsTotal)/t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),d(!1))}))}),[]);return r.a.createElement(Q,null,r.a.createElement(B,{columns:e,data:n,fetchData:E,loading:m,pageCount:b}))}var Y=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(X,null))}}]),a}(n.Component);function Z(){var e=Object(U.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n\n  .pagination {\n    padding: 0.5rem;\n  }\n"]);return Z=function(){return e},e}var ee=F.a.div(Z());function te(){var e=r.a.useMemo((function(){return[{Header:"First Name",accessor:"firstname"},{Header:"Last Name",accessor:"lastname"}]}),[]),t=r.a.useState([]),a=Object(o.a)(t,2),n=a[0],l=a[1],c=r.a.useState(!1),s=Object(o.a)(c,2),m=s[0],d=s[1],p=r.a.useState(0),h=Object(o.a)(p,2),b=h[0],f=h[1],v=r.a.useRef(0),E=r.a.useCallback((function(e){var t=e.pageSize,a=e.pageIndex,n=++v.current;d(!0),setTimeout((function(){n===v.current&&(console.log("fetching users.."),fetch("https://mighty-everglades-28994.herokuapp.com/api/v1/teachers?"+new URLSearchParams({pageIndex:a,pageSize:t}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+g.get("access_token")}}).then(function(){var e=Object(u.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(n=e.sent,a.ok){e.next=6;break}return r=n&&n.message||a.status,e.abrupt("return",Promise.reject(r));case 6:l(n.data),f(Math.ceil(parseInt(n.recordsTotal)/t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})),d(!1))}))}),[]);return r.a.createElement(ee,null,r.a.createElement(B,{columns:e,data:n,fetchData:E,loading:m,pageCount:b}))}var ae=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(te,null))}}]),a}(n.Component);function ne(e){return r.a.createElement("div",{class:"card mx-2 my-3"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h5",{class:"card-title"},e.course.name),r.a.createElement("p",{class:"card-text"},"Compulsory Course"),r.a.createElement("a",{href:"#",class:"btn btn-primary"},"Manage Course")))}function re(e){return r.a.createElement("div",{class:"card mx-2"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h5",{class:"card-title"},"Section ",e.section.name),r.a.createElement("a",{href:"#",class:"btn btn-primary"},"Manage Section")))}function le(e){return r.a.createElement("div",{class:"card my-3"},r.a.createElement("div",{class:"card-header",id:"heading"+e.standard.id},r.a.createElement("h5",{class:"mb-0"},r.a.createElement("button",{class:"btn btn-link","data-toggle":"collapse","data-target":"#h"+e.standard.id,"aria-expanded":"true","aria-controls":"collapseOne"},"Class : ",e.standard.name))),r.a.createElement("div",{id:"h"+e.standard.id,class:"collapse","aria-labelledby":"heading"+e.standard.id,"data-parent":"#accordion"},r.a.createElement("div",{class:"card-body"},r.a.createElement("h6",null,"Sections : "),r.a.createElement("div",{className:"hflex-s p-3"},e.standard.sections.map((function(e){return r.a.createElement(re,{section:e})}))),r.a.createElement("h6",{className:"mt-2"},"Courses : "),r.a.createElement("div",{className:"hflex-s p-3"},e.standard.courses.map((function(e){return r.a.createElement(ne,{course:e})}))))))}a(123);function ce(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){C.fetch("/standards/withsectionscourses","GET","application/json",!0,null,(function(e){l(e)}))}),[]),r.a.createElement("div",{className:"container my-5 p-3",id:"accordion"},a.map((function(e){return r.a.createElement(le,{standard:e})})))}var oe=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).pageSelect=function(e){console.log(e),n.setState({currentPage:e})},n.toggleSidenav=n.toggleSidenav.bind(Object(S.a)(n)),n.state={navshow:"d-flex",currentPage:"dashboard"},n}return Object(d.a)(a,[{key:"toggleSidenav",value:function(e){"d-flex"===this.state.navshow?(this.setState({navshow:"d-flex toggled"}),e(!0)):(this.setState({navshow:"d-flex"}),e(!1))}},{key:"render",value:function(){var e;return"dashboard"===this.state.currentPage?e=r.a.createElement(z,{toggleSidenav:this.toggleSidenav,pageSelect:this.pageSelect}):"users"===this.state.currentPage?e=r.a.createElement($,null):"students"===this.state.currentPage?e=r.a.createElement(Y,null):"teachers"===this.state.currentPage?e=r.a.createElement(ae,null):"standards"===this.state.currentPage&&(e=r.a.createElement(ce,null)),r.a.createElement("div",{className:this.state.navshow,id:"wrapper"},r.a.createElement(w,{pageSelect:this.pageSelect}),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement(y,null),r.a.createElement("div",{className:"mt-5"},e)))}}]),a}(n.Component);function se(e){return r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,e.user.firstname," ",e.user.lastname)))}function ie(e){return r.a.createElement("div",null,r.a.createElement(se,{user:e.user}))}function ue(e){return r.a.createElement("div",null,r.a.createElement(se,{user:e.user}))}var me=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={loading:!0,user:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.get((function(t){e.setState({loading:!1,user:t})}))}},{key:"render",value:function(){var e;return 1===this.state.user.role_id?e=r.a.createElement(oe,null):2===this.state.user.role_id?e=r.a.createElement(ie,{user:this.state.user}):3===this.state.user.role_id&&(e=r.a.createElement(ue,{user:this.state.user})),r.a.createElement("div",null,r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:150,color:"#123abc",loading:this.state.loading})),e)}}]),a}(n.Component),de=a(59),pe=function(e){var t=e.component,a=Object(de.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return h.isAuthenticated()?r.a.createElement(t,e):r.a.createElement(b.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};function ge(e){var t,a=Object(n.useState)(null),l=Object(o.a)(a,2),c=l[0],s=l[1];switch(e.user.role_id){case 1:console.log("setting as admin"),t="Admin";break;case 3:t="Teacher";break;default:console.log("setting as admin"),t="Student"}return Object(n.useEffect)((function(){if(2===e.user.role_id){var t="/user/student/"+e.user.id;console.log("student"),C.fetch(t,"GET","application/json",!1,null,(function(e){null!=e&&s(r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Class :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.section.standard.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Section :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.section.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Roll :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.roll)))))}))}else console.log(e.user.role_id),console.log("Not a student.")}),[e.user]),r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Username :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.user.username))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Email :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.user.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Phone :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.user.phone))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Role :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,t))),c))}a(124);function he(){var e=Object(b.h)().id,t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!0),i=Object(o.a)(s,2),u=i[0],m=i[1];return console.log({loading:u}),Object(n.useEffect)((function(){var t="/user/"+e;C.fetch(t,"GET","application/json",!1,null,(function(e){c(e),m(!1)}))}),[]),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement(y,null),r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:150,color:"#123abc",loading:u})),r.a.createElement("img",{className:"cover",src:"/img/profile/defaultprofilecover.jpg",alt:""}),r.a.createElement("div",{className:"container mt-14vw"},r.a.createElement("div",{className:""},r.a.createElement("img",{className:"user",src:"/img/profile/defaultuser.png",alt:"",usemap:"#examplemap"}),r.a.createElement("map",{name:"examplemap"},r.a.createElement("area",{className:"rect",coords:"0,10,40,40",shape:"poly",href:"/",alt:"Page1"})),r.a.createElement("label",{className:"uname mx-3"},l.firstname," ",l.lastname),r.a.createElement("button",{className:"btn btn-secondary float-right middle"},"Message"))),r.a.createElement("div",{className:"container profilecontent mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement(ge,{user:l})),r.a.createElement("div",{className:"col-2 offset-6"}))))}var be=function(){return r.a.createElement(v.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/login",component:f}),r.a.createElement(pe,{exact:!0,path:"/",component:me}),r.a.createElement(b.b,{path:"/user/:id",component:he})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(125),a(126);var fe=a(57),ve=a.n(fe);a(129).config(),ve.a.load({google:{families:["Nunito","sans-serif"]}}),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,a){e.exports=a(132)},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},99:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.5b27a012.chunk.js.map