(this["webpackJsonpschoolspace-web"]=this["webpackJsonpschoolspace-web"]||[]).push([[0],{102:function(e,t,a){},105:function(e,t,a){},108:function(e,t,a){},110:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},133:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),l=a.n(c),s=(a(69),a(70),a(2)),o=(a(71),a(8)),i=a.n(o),m=a(14),u=a(4),d=a(5),p=new(a(61).a),f=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"get",value:function(e){return p.get(e)}},{key:"set",value:function(e,t,a){return p.set(e,t,a)}},{key:"remove",value:function(e){console.log("Removing cookie..."),p.remove(e,{path:"/",domain:"localhost"})}}]),e}()),g=new(function(){function e(){Object(u.a)(this,e);var t=f.get("access_token");this.authenticated=!!t}return Object(d.a)(e,[{key:"login",value:function(e,t,a){var n=this,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};fetch("https://api.schoolspace.co.in/api/v1/login",r).then(function(){var e=Object(m.a)(i.a.mark((function e(t){var r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r=e.sent,console.log(r),t.ok){e.next=7;break}return c=r&&r.message||t.status,e.abrupt("return",Promise.reject(c));case 7:n.authenticated=!0,l={path:"/",sameSite:"strict"},f.set("access_token",r.access_token,l),a();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("ERROR : ",e),a(e)}))}},{key:"logout",value:function(e){f.remove("access_token"),this.authenticated=!1,null!=e&&e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),b=a(9);function E(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(s.a)(d,2),f=p[0],E=p[1],h=Object(b.g)();return r.a.createElement("div",{className:"flex-center container fullscreen"},r.a.createElement("div",{className:"w-md-40 px-xs-5 px-3"},r.a.createElement("label",{className:"logotxt w-100 mb-3"},"schoolspace"),r.a.createElement("form",{onSubmit:function(e){g.login(c,m,(function(e){null!=e?E("Invalid login attempt. Please check email/password."):(E(""),h.push("/"))})),e.preventDefault()}},r.a.createElement("label",{className:"errormessage"},f),r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:"email",className:"form-control mb-3",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"password",className:"form-control mb-3",value:m,onChange:function(e){return u(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-block btn-primary mb-3",disabled:!(c.length>0&&m.length>0)}))))}var h=a(21),v=a(13),N=a(12),j=a(19),O=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"get",value:function(e){if(!g.isAuthenticated())return null;var t={method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+f.get("access_token")}};fetch("https://api.schoolspace.co.in/api/v1/user",t).then(function(){var t=Object(m.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:if(n=t.sent,a.ok){t.next=6;break}return r=n&&n.message||a.status,t.abrupt("return",Promise.reject(r));case 6:console.log("User loaded."),e(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("ERROR : ",e),g.logout()}))}},{key:"set",value:function(e){}}]),e}()),S=a(33);function w(e){var t=Object(b.g)();return r.a.createElement("a",{className:"dropdown-item",onClick:function(e){g.logout((function(){t.push("/login")}))}},"Logout")}var y=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={user:!1},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.get((function(t){e.setState({user:t})}))}},{key:"render",value:function(){var e;return e=this.state.user?r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{id:"navbarDropdown",className:"nav-link dropdown-toggle",href:"/#/user/"+this.state.user.username,role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.user.firstname+" "+this.state.user.lastname,r.a.createElement("span",{className:"caret"})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},r.a.createElement("a",{className:"dropdown-item",href:"/#/user/"+this.state.user.username},"Profile"),r.a.createElement(w,null)))):r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/#/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/#/register"},"Register"))),r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light fixed-top bg-white shadow-sm"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"schoolspace"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"{{ __('Toggle navigation') }}"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},e)))}}]),a}(n.Component),k=(a(102),function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bg-light border-right mt-4",id:"sidebar-wrapper"},r.a.createElement("div",{className:"sidebar-heading"}),r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("dashboard")}},"Dashboard"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("users")}},"Users"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("students")}},"Students"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("teachers")}},"Teachers"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("staff")}},"Staff"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("standards")}},"Standards"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("sections")}},"Sections"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("examinations")}},"Examinations"),r.a.createElement("button",{className:"list-group-item list-group-item-action bg-light",onClick:function(){return e.props.pageSelect("reports")}},"Reports")))}}]),a}(n.Component)),x=a(16),C=new(function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/json",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=arguments.length>5?arguments[5]:void 0;if(r){if(!g.isAuthenticated())return console.log("Not authenticated!"),"Not Authorized";t={method:a,headers:{Accept:n,Authorization:"Bearer "+f.get("access_token")}}}else t={method:a,headers:{Accept:n}};fetch("https://api.schoolspace.co.in/api/v1"+e,t).then(function(){var e=Object(m.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,t.ok){e.next=6;break}return n=a&&a.message||t.status,e.abrupt("return",Promise.reject(n));case 6:console.log("Sending API Request.."),c(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("ERROR : ",e),"string"===typeof e&&e.includes("Unauthenticated")&&g.logout()}))}))}]),e}()),P=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).loading=!0,n.state={stats:r.a.createElement(j.ClipLoader,{size:10,color:"#123abc",loading:!0})},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.fetch(this.props.relendpoint,"GET","text/plain",!0,null,(function(t){e.loading=!1,e.setState({stats:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.dashcardclass},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row no-gutters align-items-center"},r.a.createElement("div",{className:"col-9"},r.a.createElement("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1"},this.props.title),r.a.createElement("div",{className:"h5 mb-0 font-weight-bold darkslategrey f-800"},this.state.stats)),r.a.createElement("div",{className:"col-3"},r.a.createElement(x.a,{icon:this.props.icon,size:"2x"})))))}}]),a}(n.Component),_=(a(105),a(10)),T=a(41),R=a(63),A=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loading:!0},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:100,color:"#123abc",loading:this.state.loading})),r.a.createElement(T.a,{plugins:[R.a],initialView:"dayGridMonth"}))}}]),a}(n.Component),I=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).state={sidenavtoggleicon:_.a},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t="card shadow-sm h-100 py-2";return r.a.createElement("div",null,r.a.createElement("button",{id:"btnSideNavToggle",className:"btn btn-primary px-1 rounded-0 mt-3",onClick:function(){e.props.toggleSidenav((function(t){t?e.setState({sidenavtoggleicon:_.b}):e.setState({sidenavtoggleicon:_.a})}))}},r.a.createElement(x.a,{icon:this.state.sidenavtoggleicon})),r.a.createElement("div",{className:"container-fluid maxw-90"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm",onClick:function(){return e.props.pageSelect("users")}},r.a.createElement(P,{title:"Total Users",relendpoint:"/users/count",icon:_.k,dashcardclass:t+" border-left-grey"})),r.a.createElement("div",{className:"col-sm",onClick:function(){return e.props.pageSelect("students")}},r.a.createElement(P,{title:"Students",relendpoint:"/students/count",icon:_.j,dashcardclass:t+" border-left-blue"})),r.a.createElement("div",{className:"col-sm",onClick:function(){return e.props.pageSelect("teachers")}},r.a.createElement(P,{title:"Teachers",relendpoint:"/teachers/count",icon:_.d,dashcardclass:t+" border-left-red"})),r.a.createElement("div",{className:"col-sm",onClick:function(){return e.props.pageSelect("staff")}},r.a.createElement(P,{title:"Staff",relendpoint:"/users/staffcount",icon:_.i,dashcardclass:t+" border-left-orange"}))),r.a.createElement("div",{className:"row my-5"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement(A,null)),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col",onClick:function(){return e.props.pageSelect("standards")}},r.a.createElement(P,{title:"Standards",relendpoint:"/standards/count",icon:_.h,dashcardclass:t}))),r.a.createElement("div",{className:"row py-3"},r.a.createElement("div",{className:"col"},r.a.createElement(P,{title:"Sections",relendpoint:"/sections/count",icon:_.f,dashcardclass:t})))))))}}]),a}(n.Component),L=(a(108),a(22)),M=a(23),z=a(38);a(110);function H(e){var t=e.setSearch,a=e.gotoPage,n=r.a.useState([]),c=Object(s.a)(n,2),l=c[0],o=c[1],i=Object(z.useAsyncDebounce)((function(e){t(e||""),a(0)}),500);return r.a.createElement("input",{value:l||"",type:"text",className:"form-control",placeholder:"search","aria-label":"search","aria-describedby":"basic-addon1",onChange:function(e){o(e.target.value),i(e.target.value)}})}function G(e){var t=e.columns,a=e.data,c=e.fetchData,l=e.pageCount,o=e.addmodal,i=Object(z.useTable)({columns:t,data:a,initialState:{pageIndex:0},manualPagination:!0,pageCount:l},z.usePagination),m=i.getTableProps,u=i.getTableBodyProps,d=i.headerGroups,p=i.prepareRow,f=i.page,g=i.canPreviousPage,b=i.canNextPage,E=i.pageOptions,h=i.pageCount,v=i.gotoPage,N=i.nextPage,j=i.previousPage,O=i.setPageSize,S=i.state,w=S.pageIndex,y=S.pageSize,k=Object(n.useState)(""),C=Object(s.a)(k,2),P=C[0],T=C[1];return r.a.useEffect((function(){c({pageIndex:w,pageSize:y,search:P})}),[c,w,y,P]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"float-left w-25"},o),r.a.createElement("div",{className:"input-group mb-3 float-right w-50"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement(x.a,{icon:_.g}))),r.a.createElement(H,{setSearch:T,gotoPage:v})),r.a.createElement("table",m(),r.a.createElement("thead",null,d.map((function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return r.a.createElement("th",e.getHeaderProps(),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""))})),r.a.createElement("th",null))}))),r.a.createElement("tbody",u(),f.map((function(e,t){return p(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-transparent"},r.a.createElement(x.a,{icon:_.e,className:"mx-auto"}))))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"10000"},"Showing ",f.length," of ~",l*y," results")))),r.a.createElement("div",{className:"pagination inlineblock"},r.a.createElement("div",{className:"float-left left"},r.a.createElement("select",{value:y,onChange:function(e){O(Number(e.target.value))},className:"form-control"},[10,20,30,40,50].map((function(e){return r.a.createElement("option",{key:e,value:e},"Show ",e)})))),r.a.createElement("div",{className:"float-right right"},r.a.createElement("span",null,"Go to page:"," ",r.a.createElement("input",{type:"number",defaultValue:w+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;v(t)},style:{width:"100px"}}))," ",r.a.createElement("span",null,"Page"," ",r.a.createElement("strong",null,w+1," of ",E.length)," "),r.a.createElement("button",{onClick:function(){return v(0)},disabled:!g,className:"btn btn-primary squaresides"},"<<")," ",r.a.createElement("button",{onClick:function(){return j()},disabled:!g,className:"btn btn-primary squaresides"},"<")," ",r.a.createElement("button",{onClick:function(){return N()},disabled:!b,className:"btn btn-primary squaresides"},">")," ",r.a.createElement("button",{onClick:function(){return v(h-1)},disabled:!b,className:"btn btn-primary squaresides"},">>"))))}var U=a(56),D=a.n(U);function F(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(),i=Object(s.a)(o,2),m=i[0],u=i[1];return r.a.createElement("div",{className:"from-group-row",id:"hidden_student_row"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"standard_id",className:"col-md-4 col-form-label text-md-center"},"Standard ID"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("select",{id:"standard_id",type:"text",name:"standard_id",onChange:function(e){return t=e.target.value,void C.fetch("/sections?standard_id=".concat(t),"GET","application/json",!0,null,(function(e){l(e),console.log(e)}));var t},onInput:e.changeHandle,required:!0,className:"form-control"},r.a.createElement("option",{value:""}," Select Standard "),e.standards.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name," ")}))))),r.a.createElement("div",{className:"form-group row",id:"student_section_id"},r.a.createElement("label",{htmlFor:"student_section",className:"col-md-4 col-form-label text-md-center"},"Section"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("select",{id:"student_section",type:"text",name:"student_section",onChange:function(e){return t=e.target.value,void C.fetch("/students/nextroll?section=".concat(t),"GET","application/json",!0,null,(function(e){u(e),console.log(e)}));var t},onInput:e.changeHandle,required:!0,className:"form-control"},r.a.createElement("option",{value:""}," Select Section "),c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name," ")}))))),r.a.createElement("div",{className:"form-group row",id:"roll_id"},r.a.createElement("label",{htmlFor:"roll",className:"col-md-4 col-form-label text-md-center"},"Roll No."),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"roll",type:"number",name:"roll",placeholder:m,onChange:e.changeHandle,required:!0,className:"form-control"}))))}var q=a(30),B=a(31);var J=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],r=t[1],c={};return[a,function(e){e.persist(),r((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(q.a)({},e.target.name,e.target.value.trim()))}))},function(e){e.persist(),r(Object(B.a)(Object(B.a)({},c),{},Object(q.a)({},e.target.name,e.target.value)))}]};function W(){var e,t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),i=Object(s.a)(o,2),m=i[0],u=i[1],d=J(),p=Object(s.a)(d,3),g=p[0],b=p[1],E=p[2];return"2"===g.user_role&&(e=r.a.createElement(F,{changeHandle:b,standards:m})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-primary","data-toggle":"modal","data-target":"#addUserModal",onClick:function(){C.fetch("/roles","GET","application/json",!0,null,(function(e){l(e),console.log(e)}))}},"Add User"),r.a.createElement("div",{className:"modal fade",id:"addUserModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Add User"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{method:"POST",onSubmit:function(e){e.preventDefault(),e.persist(),console.log(JSON.stringify(g)),D.a.post("http://localhost:8000/api/v1/users/store",g,{headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer "+f.get("access_token")}}).then((function(t){console.log(t),console.log(t.data),alert(e.target.firstname.value+" "+e.target.lastname.value+" added successfully."),E(e),e.target.reset()})).catch((function(e){console.log(e),alert("Email or Roll is taken")}))}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"firstname",className:"col-md-4 col-form-label text-md-center"},"First Name"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"firstname",type:"text",name:"firstname",required:!0,onChange:b,className:"form-control"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"lastname",className:"col-md-4 col-form-label text-md-center"},"Last Name"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"lastname",type:"text",name:"lastname",onChange:b,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"email",className:"col-md-4 col-form-label text-md-center"},"E-Mail Address"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"email",type:"email",name:"email",onChange:b,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"phone",className:"col-md-4 col-form-label text-md-center"},"Phone"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{id:"phone",type:"text",name:"phone",onChange:b,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"user_role",className:"col-md-4 col-form-label text-md-center"},"User Role"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("select",{id:"user_role",type:"text",name:"user_role",onChange:function(e){"2"===e.target.value&&C.fetch("/standards","GET","application/json",!0,null,(function(e){u(e),console.log(e)}))},onInput:b,required:!0,className:"form-control"},r.a.createElement("option",{value:""}," ","Select Role"," "),c.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id}," ",e.name," ")}))))),e,r.a.createElement("div",{className:"modal-footer justify-content-space-between"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))))))))}function V(){var e=Object(L.a)(["\n\tpadding: 1rem;\n\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 1px solid black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0.5rem;\n\t\t\tborder-bottom: 1px solid black;\n\t\t\tborder-right: 1px solid black;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.pagination {\n\t\tpadding: 0.5rem;\n\t}\n"]);return V=function(){return e},e}var $=M.a.div(V());function K(){var e=r.a.useMemo((function(){return[{Header:"First Name",accessor:"firstname"},{Header:"Last Name",accessor:"lastname"},{Header:"Email",accessor:"email"},{Header:"Phone",accessor:"phone"},{Header:"Role",accessor:"role"}]}),[]),t=r.a.useState([]),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!1),o=Object(s.a)(l,2),u=o[0],d=o[1],p=r.a.useState(0),g=Object(s.a)(p,2),b=g[0],E=g[1],h=r.a.useRef(0),v=r.a.useCallback((function(e){var t=e.pageSize,a=e.pageIndex,n=e.search,r=++h.current;d(!0),r===h.current&&(console.log("fetching users.."),fetch("https://api.schoolspace.co.in/api/v1/users?"+new URLSearchParams({pageIndex:a,pageSize:t,search:n}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+f.get("access_token")}}).then(function(){var e=Object(m.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(n=e.sent,a.ok){e.next=6;break}return r=n&&n.message||a.status,e.abrupt("return",Promise.reject(r));case 6:c(n.data),E(Math.ceil(parseInt(n.recordsTotal)/t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})).finally((function(){d(!1)})))}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:150,color:"#123abc",loading:u})),r.a.createElement("div",{className:u?"spinner-parent":""},r.a.createElement($,null,r.a.createElement(G,{columns:e,data:n,fetchData:v,pageCount:b,addmodal:r.a.createElement(W,null)}))))}function Q(){return r.a.createElement("div",null,r.a.createElement(K,null))}function X(){var e=Object(L.a)(["\n\tpadding: 1rem;\n\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 1px solid black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0.5rem;\n\t\t\tborder-bottom: 1px solid black;\n\t\t\tborder-right: 1px solid black;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.pagination {\n\t\tpadding: 0.5rem;\n\t}\n"]);return X=function(){return e},e}var Y=M.a.div(X());function Z(){var e=r.a.useMemo((function(){return[{Header:"First Name",accessor:"firstname"},{Header:"Last Name",accessor:"lastname"},{Header:"Standard",accessor:"standard"},{Header:"Section",accessor:"section"},{Header:"Roll",accessor:"roll"}]}),[]),t=r.a.useState([]),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!1),o=Object(s.a)(l,2),u=o[0],d=o[1],p=r.a.useState(0),g=Object(s.a)(p,2),b=g[0],E=g[1],h=r.a.useRef(0),v=r.a.useCallback((function(e){var t=e.pageSize,a=e.pageIndex,n=e.search,r=++h.current;d(!0),r===h.current&&(console.log("fetching users.."),fetch("https://api.schoolspace.co.in/api/v1/students?"+new URLSearchParams({pageIndex:a,pageSize:t,search:n}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+f.get("access_token")}}).then(function(){var e=Object(m.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(n=e.sent,a.ok){e.next=6;break}return r=n&&n.message||a.status,e.abrupt("return",Promise.reject(r));case 6:console.log(n),c(n.data),E(Math.ceil(parseInt(n.recordsTotal)/t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})).finally((function(){d(!1)})))}),[d]);return r.a.createElement(Y,null,r.a.createElement(G,{columns:e,data:n,fetchData:v,loading:u,pageCount:b}))}var ee=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Z,null))}}]),a}(n.Component);function te(){var e=Object(L.a)(["\n\tpadding: 1rem;\n\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 1px solid black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0.5rem;\n\t\t\tborder-bottom: 1px solid black;\n\t\t\tborder-right: 1px solid black;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.pagination {\n\t\tpadding: 0.5rem;\n\t}\n"]);return te=function(){return e},e}var ae=M.a.div(te());function ne(){var e=r.a.useMemo((function(){return[{Header:"First Name",accessor:"firstname"},{Header:"Last Name",accessor:"lastname"}]}),[]),t=r.a.useState([]),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!1),o=Object(s.a)(l,2),u=o[0],d=o[1],p=r.a.useState(0),g=Object(s.a)(p,2),b=g[0],E=g[1],h=r.a.useRef(0),v=r.a.useCallback((function(e){var t=e.pageSize,a=e.pageIndex,n=e.search,r=++h.current;d(!0),r===h.current&&fetch("https://api.schoolspace.co.in/api/v1/teachers?"+new URLSearchParams({pageIndex:a,pageSize:t,search:n}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+f.get("access_token")}}).then(function(){var e=Object(m.a)(i.a.mark((function e(a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:if(n=e.sent,a.ok){e.next=6;break}return r=n&&n.message||a.status,e.abrupt("return",Promise.reject(r));case 6:c(n.data),E(Math.ceil(parseInt(n.recordsTotal)/t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})).finally((function(){d(!1)}))}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:150,color:"#123abc",loading:u})),r.a.createElement("div",{className:u?"spinner-parent":""},r.a.createElement(ae,null,r.a.createElement(G,{columns:e,data:n,fetchData:v,pageCount:b}))))}var re=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ne,null))}}]),a}(n.Component);function ce(e){return r.a.createElement("div",{id:e.course.id,className:"card m-1 coursecard"},r.a.createElement("div",{className:"card-header card-header-clean f1vw fw600"},e.course.subject),r.a.createElement("div",{className:"card-body"},e.course.firstname+" "+e.course.lastname))}function le(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){C.fetch("/courses?"+new URLSearchParams({section_id:e.section_id}),"GET","application/json",!0,null,(function(e){l(e)}))}),[]),r.a.createElement("div",{className:"container my-5 p-3"},r.a.createElement("div",{className:"btn my-3 ml-3 float-left",onClick:function(){return e.setSection(-1)}},r.a.createElement(x.a,{icon:_.c})),r.a.createElement("div",{className:"row my-5 w-100"},c.map((function(t){return r.a.createElement("a",{href:"/#/section/course/"+t.id,key:t.id},r.a.createElement(ce,{course:t,setSection:e.setSection}))}))))}function se(e){return r.a.createElement("div",{className:"card m-3 w-25 h-100"},r.a.createElement("div",{className:"card-header card-header-clean f1vw fw600",onClick:function(){return e.setSection(e.section.id)}},"Section ",e.section.name),r.a.createElement("div",{className:"card-body fsxs"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},"Teachers : ",e.section.teachers)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},"Students : ",e.section.students))))}function oe(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){C.fetch("/sections?"+new URLSearchParams({standard_id:e.standard_id}),"GET","application/json",!0,null,(function(e){l(e)}))}),[]),r.a.createElement("div",{className:"container my-5 p-3"},r.a.createElement("div",{className:"btn my-3 ml-3 float-left",onClick:function(){return e.setStandard(-1)}},r.a.createElement(x.a,{icon:_.c})),r.a.createElement("div",{className:"row my-5 w-100"},c.map((function(t){return r.a.createElement(se,{section:t,setSection:e.setSection})}))))}function ie(e){return r.a.createElement("div",{className:"card m-3 w-25 h-100"},r.a.createElement("div",{className:"card-header card-header-clean f1vw fw600",onClick:function(){return e.setStandard(e.standard.id)}},"Class ",e.standard.name),r.a.createElement("div",{className:"card-body fsxs"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},"Sections : ",e.standard.sections),r.a.createElement("div",{className:"col"},"Teachers : ",e.standard.teachers)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},"Students : ",e.standard.students))))}function me(e){var t=e.setSearch,a=r.a.useState([]),n=Object(s.a)(a,2),c=n[0],l=n[1];return r.a.createElement("input",{value:c||"",type:"text",className:"form-control",placeholder:"search","aria-label":"search","aria-describedby":"basic-addon1",onChange:function(e){l(e.target.value),function(e){t(e||"")}(e.target.value)}})}function ue(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){C.fetch("/standards","GET","application/json",!0,{search:m},(function(e){l(e)}))}),[m]),r.a.createElement("div",{className:"container my-5 p-3"},r.a.createElement("div",{className:"input-group mb-3 float-right w-50"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},r.a.createElement(x.a,{icon:_.g}))),r.a.createElement(me,{setSearch:u})),r.a.createElement("div",{className:"row my-5 w-100"},c.map((function(t){return r.a.createElement(ie,{standard:t,setStandard:e.setStandard})}))))}a(128);function de(){var e=Object(n.useState)(-1),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(-1),o=Object(s.a)(l,2),i=o[0],m=o[1];return r.a.createElement("div",null,-1===a&&r.a.createElement(ue,{setStandard:c}),a>0&&-1===i&&r.a.createElement(oe,{standard_id:a,setStandard:c,setSection:m}),a>0&&i>0&&r.a.createElement(le,{section_id:i,setSection:m}))}var pe=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).pageSelect=function(e){n.setState({currentPage:e})},n.toggleSidenav=n.toggleSidenav.bind(Object(S.a)(n)),n.state={navshow:"d-flex",currentPage:"dashboard"},n}return Object(d.a)(a,[{key:"toggleSidenav",value:function(e){"d-flex"===this.state.navshow?(this.setState({navshow:"d-flex toggled"}),e(!0)):(this.setState({navshow:"d-flex"}),e(!1))}},{key:"render",value:function(){var e;return"dashboard"===this.state.currentPage?e=r.a.createElement(I,{toggleSidenav:this.toggleSidenav,pageSelect:this.pageSelect}):"users"===this.state.currentPage?e=r.a.createElement(Q,null):"students"===this.state.currentPage?e=r.a.createElement(ee,null):"teachers"===this.state.currentPage?e=r.a.createElement(re,null):"standards"===this.state.currentPage&&(e=r.a.createElement(de,null)),r.a.createElement("div",{className:this.state.navshow,id:"wrapper"},r.a.createElement(k,{pageSelect:this.pageSelect}),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement(y,null),r.a.createElement("div",{className:"mt-5"},e)))}}]),a}(n.Component),fe=a(58);function ge(e){var t,a=[],n=Object(fe.a)(e.data);try{for(n.s();!(t=n.n()).done;){var c=t.value,l=r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-8"},c.name),r.a.createElement("div",{className:"col-4"},c.date));a.push(l)}}catch(s){n.e(s)}finally{n.f()}return r.a.createElement("div",{className:"card bordercard mt-3 "+e.border},r.a.createElement("div",{className:"card-header card-header-clean p-1"},r.a.createElement("button",{className:"btn btn-default btn-block","data-toggle":"collapse","data-target":"#"+e.id,"aria-expanded":"true","aria-controls":"#"+e.id},r.a.createElement("span",{className:"float-left ml-0 mr-auto"},r.a.createElement("strong",null,e.title)),r.a.createElement("span",{className:"badge badge-light float-right mt-1"},e.badge))),r.a.createElement("div",{id:e.id,className:"collapse","aria-labelledby":"headingOne"},r.a.createElement("div",{className:"card-body pt-3 px-3 pb-1"},a)))}a(129);function be(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){C.fetch("/courses/listforuser","GET","application/json",!0,null,(function(e){l(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container mt-5 pt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-7 col-lg-8 mt-3 order-md-1 order-2"},r.a.createElement("div",{className:"tilesFlexContainer"},c.map((function(e){return r.a.createElement("a",{href:"/#/section/course/"+e.id,key:e.id},r.a.createElement(ce,{course:e}))})))),r.a.createElement("div",{className:"col-md-5 col-lg-4 order-md-2 order-1"},r.a.createElement(ge,{title:"Upcoming Exams",id:"upexams",border:"borderred",data:[{name:"Maths Assessment",date:"Tomorrow"},{name:"English Assessment",date:"21.11.2020"}],badge:"2"}),r.a.createElement(ge,{title:"Assignments",id:"upassignments",border:"borderorange",data:[{name:"Bengali Assignment",date:"in 3 days"},{name:"History Assignment",date:"15.11.2020"},{name:"Science Assignment",date:"17.11.2020"}],badge:"3"})))))}function Ee(e){return r.a.createElement("div",null,r.a.createElement(y,null))}function he(e){return r.a.createElement("div",null,r.a.createElement(Ee,{user:e.user}))}var ve=function(e){Object(v.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={loading:!0,user:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;O.get((function(t){e.setState({loading:!1,user:t})}))}},{key:"render",value:function(){var e;return 1===this.state.user.role_id||2===this.state.user.role_id?e=r.a.createElement(pe,null):5===this.state.user.role_id?e=r.a.createElement(be,{user:this.state.user}):4===this.state.user.role_id&&(e=r.a.createElement(he,{user:this.state.user})),r.a.createElement("div",null,r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:150,color:"#123abc",loading:this.state.loading})),e)}}]),a}(n.Component),Ne=a(62),je=function(e){var t=e.component,a=Object(Ne.a)(e,["component"]);return r.a.createElement(b.b,Object.assign({},a,{render:function(e){return g.isAuthenticated()?r.a.createElement(t,e):r.a.createElement(b.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};function Oe(e){var t,a=Object(n.useState)(null),c=Object(s.a)(a,2),l=c[0],o=c[1];switch(e.user.role_id){case 1:console.log("setting as admin"),t="Admin";break;case 3:t="Teacher";break;default:console.log("setting as admin"),t="Student"}return Object(n.useEffect)((function(){if(2===e.user.role_id){var t="/user/student/"+e.user.id;console.log("student"),C.fetch(t,"GET","application/json",!1,null,(function(e){null!=e&&o(r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Class :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.section.standard.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Section :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.section.name))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Roll :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.roll)))))}))}else console.log(e.user.role_id),console.log("Not a student.")}),[e.user]),r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Username :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.user.username))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Email :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.user.email))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Phone :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,e.user.phone))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("label",null,"Role :")),r.a.createElement("div",{className:"col"},r.a.createElement("label",null,t))),l))}a(130),a(131);var Se=a(59),we=a.n(Se);a(132);var ye=function(){var e=Object(n.useState)("/img/profile/defaultuser.png"),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),o=Object(s.a)(l,2),i=o[0],m=o[1],u=Object(n.useState)({aspect:1}),d=Object(s.a)(u,2),p=d[0],f=d[1],g=Object(n.useState)(null),b=Object(s.a)(g,2),E=b[0],h=b[1];return r.a.createElement("div",{className:"modal fade",id:"userProfilePicModal",tabIndex:"-1",role:"dialog","aria-labelledby":"userProfilePicModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"userProfilePicModalLabel"},"Modal title"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",null,r.a.createElement("div",{className:"col-md-6 pb-2"},r.a.createElement("input",{id:"picture",type:"file",name:"picture",accept:"image/*",required:!0,onInput:function(e){c(URL.createObjectURL(e.target.files[0]))}})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(we.a,{src:a,crop:p,onImageLoaded:m,onChange:f,circularCrop:!0})),E&&r.a.createElement("div",{className:"col-md-6 "},r.a.createElement("img",{src:E,alt:"Cropped Image",className:"img-preview"}))),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){var e=document.createElement("canvas"),t=i.naturalWidth/i.width,a=i.naturalHeight/i.height;e.width=p.width,e.height=p.height,e.getContext("2d").drawImage(i,p.x*t,p.y*a,p.width*t,p.height*a,0,0,p.width,p.height);var n=e.toDataURL("image/jpeg");h(n)}},"Crop Image"))))))};function ke(){var e=Object(b.h)().id,t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!0),i=Object(s.a)(o,2),m=i[0],u=i[1];return console.log({loading:m}),Object(n.useEffect)((function(){var t="/user/"+e;C.fetch(t,"GET","application/json",!1,null,(function(e){l(e),u(!1)}))}),[]),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement(y,null),r.a.createElement("div",{className:"spinner"},r.a.createElement(j.ClipLoader,{size:150,color:"#123abc",loading:m})),r.a.createElement("img",{className:"cover",src:"/img/profile/defaultprofilecover.jpg",alt:""}),r.a.createElement("div",{className:"container mt-14vw"},r.a.createElement("div",{className:""},r.a.createElement("img",{className:"user",src:"/img/profile/defaultuser.png",alt:"","data-toggle":"modal","data-target":"#userProfilePicModal"}),r.a.createElement(ye,null),r.a.createElement("label",{className:"uname mx-3"},c.firstname," ",c.lastname),r.a.createElement("button",{className:"btn btn-secondary float-right middle"},"Message"))),r.a.createElement("div",{className:"container profilecontent mt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement(Oe,{user:c})),r.a.createElement("div",{className:"col-2 offset-6"}))))}function xe(e){var t=Object(b.h)().id,a=Object(n.useState)([]),c=Object(s.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){C.fetch("/coursesection/get/"+t,"GET","application/json",!0,null,(function(e){console.log(e),o(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container mt-5 pt-3"},r.a.createElement("div",{className:"row my-3"},r.a.createElement("div",{className:"col m-md-0 ml-3"},r.a.createElement("div",{className:"row"},r.a.createElement("h3",null,l.subject)),r.a.createElement("div",{className:"row mb-1"},r.a.createElement("span",{className:"mr-3"},r.a.createElement("strong",null,"Class : "),l.standard),r.a.createElement("span",null,r.a.createElement("strong",null,"Section : "),l.section)),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,r.a.createElement("strong",null,"Teacher : "),l.firstname+" "+l.lastname))),r.a.createElement("div",{className:"col pt-3"},r.a.createElement("a",{href:"/#/forum/"+l.forum_id,className:"btn btn-outline-primary float-right mr-3"},"Forum"))),r.a.createElement("div",{className:"row my-3"},r.a.createElement("div",{className:"card mt-3 blue w-100"},r.a.createElement("div",{className:"card-header card-header-clean p-1"},r.a.createElement("button",{className:"btn btn-default btn-block","data-toggle":"collapse","data-target":"#cannouncements","aria-expanded":"true","aria-controls":"#cannouncements"},r.a.createElement("span",{className:"float-left ml-0 mr-auto"},r.a.createElement("strong",null,"Course Announcements")),r.a.createElement("span",{className:"badge badge-light float-right mt-1"},"1"))),r.a.createElement("div",{id:"cannouncements",className:"collapse","aria-labelledby":"headingOne"},r.a.createElement("div",{className:"card-body py-3 px-3 pb-1"},"Announcement 1")))),r.a.createElement("div",{className:"row my-3"},r.a.createElement("div",{className:"card mt-3 red w-100"},r.a.createElement("div",{className:"card-header card-header-clean p-1"},r.a.createElement("button",{className:"btn btn-default btn-block","data-toggle":"collapse","data-target":"#cassign","aria-expanded":"true","aria-controls":"#cassign"},r.a.createElement("span",{className:"float-left ml-0 mr-auto"},r.a.createElement("strong",null,"Assignments and Examinations")),r.a.createElement("span",{className:"badge badge-light float-right mt-1"},"3"))),r.a.createElement("div",{id:"cassign",className:"collapse","aria-labelledby":"headingOne"},r.a.createElement("div",{className:"card-body py-3 px-3 pb-1"})))),r.a.createElement("div",{className:"row my-5"},r.a.createElement("div",{className:"col"},r.a.createElement("strong",null,"Course Contents")))))}a(133);function Ce(){var e=Object(L.a)(["\n\tpadding: 1rem;\n\n\ttable {\n\t\tborder-spacing: 0;\n\t\tborder: 1px solid black;\n\n\t\ttr {\n\t\t\t:last-child {\n\t\t\t\ttd {\n\t\t\t\t\tborder-bottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tth,\n\t\ttd {\n\t\t\tmargin: 0;\n\t\t\tpadding: 0.5rem;\n\t\t\tborder-bottom: 1px solid black;\n\t\t\tborder-right: 1px solid black;\n\n\t\t\t:last-child {\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t}\n\t}\n\n\t.pagination {\n\t\tpadding: 0.5rem;\n\t}\n"]);return Ce=function(){return e},e}var Pe=M.a.div(Ce());function _e(e){var t=r.a.useMemo((function(){return[{Header:"Post",accessor:"post"},{Header:"User",accessor:"username"},{Header:"Replies",accessor:"replies"},{Header:"Created At",accessor:"created_at"}]}),[]),a=r.a.useState([]),n=Object(s.a)(a,2),c=n[0],l=n[1],o=r.a.useState(!1),u=Object(s.a)(o,2),d=u[0],p=u[1],g=r.a.useState(0),b=Object(s.a)(g,2),E=b[0],h=b[1],v=r.a.useRef(0),N=r.a.useCallback((function(t){var a=t.pageSize,n=t.pageIndex,r=t.search,c=++v.current;p(!0),c===v.current&&fetch("https://api.schoolspace.co.in/api/v1/forums/"+e.forum_id+"/threads?"+new URLSearchParams({pageIndex:n,pageSize:a,search:r}),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+f.get("access_token")}}).then(function(){var e=Object(m.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,t.ok){e.next=6;break}return r=n&&n.message||t.status,e.abrupt("return",Promise.reject(r));case 6:console.log(n),l(n.data),h(Math.ceil(parseInt(n.recordsTotal)/a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("There was an error!",e)})).finally((function(){p(!1)}))}),[p]);return r.a.createElement(Pe,null,r.a.createElement(G,{columns:t,data:c,fetchData:N,loading:d,pageCount:E}))}function Te(){var e=Object(b.h)().id,t=Object(n.useState)({}),a=Object(s.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){C.fetch("/forums/get/"+e,"GET","application/json",!0,null,(function(e){console.log(e),l(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"container mt-5 pt-3"},r.a.createElement("div",{className:"row my-3"},r.a.createElement("div",{className:"col-md-8 col-6"},r.a.createElement("span",{className:"fsxl m-5"},r.a.createElement("strong",null,"FORUM"))),r.a.createElement("div",{className:"col-md-4 col-6"},r.a.createElement("div",{className:"row"},"Course : ",c.course),r.a.createElement("div",{className:"row"},"Section : ",c.section))),r.a.createElement("div",{className:"row"},r.a.createElement(_e,{forum_id:e}))))}var Re=function(){return r.a.createElement(h.a,null,r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/login",component:E}),r.a.createElement(je,{exact:!0,path:"/",component:ve}),r.a.createElement(b.b,{path:"/user/:id",component:ke}),r.a.createElement(je,{exact:!0,path:"/section/course/:id",component:xe}),r.a.createElement(je,{exact:!0,path:"/forum/:id",component:Te})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(134),a(135);var Ae=a(60),Ie=a.n(Ae);a(138).config(),Ie.a.load({google:{families:["Nunito","sans-serif"]}}),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,a){e.exports=a(141)},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.66eb6503.chunk.js.map